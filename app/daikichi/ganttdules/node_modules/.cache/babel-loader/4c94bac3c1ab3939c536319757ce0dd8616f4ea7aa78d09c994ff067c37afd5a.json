{"ast":null,"code":"var _jsxFileName = \"C:\\\\work\\\\EMG\\\\app01\\\\src\\\\components\\\\Gantt.jsx\";\nimport React from \"react\";\nimport { parseISO, startOfMonth, endOfMonth, startOfWeek, endOfWeek, startOfDay, endOfDay, differenceInDays, differenceInHours, addDays, addHours, format } from \"date-fns\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction getRange(view, currentDate) {\n  if (view === \"month\") {\n    const start = startOfMonth(currentDate);\n    const end = endOfMonth(currentDate);\n    const days = differenceInDays(end, start) + 1;\n    const columns = Array.from({\n      length: days\n    }).map((_, i) => addDays(start, i));\n    return {\n      start,\n      end,\n      columns,\n      unit: \"day\"\n    };\n  }\n  if (view === \"week\") {\n    const start = startOfWeek(currentDate, {\n      weekStartsOn: 1\n    });\n    const end = endOfWeek(currentDate, {\n      weekStartsOn: 1\n    });\n    const days = differenceInDays(end, start) + 1;\n    const columns = Array.from({\n      length: days\n    }).map((_, i) => addDays(start, i));\n    return {\n      start,\n      end,\n      columns,\n      unit: \"day\"\n    };\n  }\n  // day view: use 24 hours\n  const start = startOfDay(currentDate);\n  const end = endOfDay(currentDate);\n  const columns = Array.from({\n    length: 24\n  }).map((_, i) => addHours(start, i));\n  return {\n    start,\n    end,\n    columns,\n    unit: \"hour\"\n  };\n}\nexport default function Gantt({\n  tasks,\n  view,\n  currentDate,\n  onTaskClick,\n  editingTaskId\n}) {\n  const range = getRange(view, currentDate);\n  const totalUnits = range.unit === \"day\" ? differenceInDays(range.end, range.start) + 1 : differenceInHours(range.end, range.start) + 1;\n  const unitLabel = d => range.unit === \"day\" ? format(d, \"MM/dd (E)\") : format(d, \"HH:00\");\n  const toPercent = date => {\n    const dt = typeof date === \"string\" ? parseISO(date) : date;\n    const diff = range.unit === \"day\" ? differenceInDays(dt, range.start) : differenceInHours(dt, range.start);\n    return diff / totalUnits * 100;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"gantt\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeline\",\n      children: range.columns.map((col, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-col\",\n        style: {\n          width: `${100 / range.columns.length}%`\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"time-label\",\n          children: unitLabel(col)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"track-area\",\n      children: tasks.map((t, idx) => {\n        const start = parseISO(t.start);\n        const end = parseISO(t.end);\n        // ensure values within range\n        const startClamped = start < range.start ? range.start : start;\n        const endClamped = end > range.end ? range.end : end;\n        const left = toPercent(startClamped);\n        const right = toPercent(endClamped);\n        const width = Math.max(0.5, right - left); // at least small width\n        const isSelected = editingTaskId && editingTaskId === t.id;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `task${isSelected ? \" selected\" : \"\"}`,\n            style: {\n              left: `${left}%`,\n              width: `${width}%`,\n              background: t.color\n            },\n            onClick: () => onTaskClick && onTaskClick(t),\n            title: `${t.title}\\n${t.description || \"\"}\\n${format(start, \"yyyy-MM-dd HH:mm\")} - ${format(end, \"yyyy-MM-dd HH:mm\")}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"task-title\",\n              children: t.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"task-date\",\n              children: [format(start, \"MM/dd\"), \" - \", format(end, \"MM/dd\")]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)\n        }, t.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_c = Gantt;\nvar _c;\n$RefreshReg$(_c, \"Gantt\");","map":{"version":3,"names":["React","parseISO","startOfMonth","endOfMonth","startOfWeek","endOfWeek","startOfDay","endOfDay","differenceInDays","differenceInHours","addDays","addHours","format","jsxDEV","_jsxDEV","getRange","view","currentDate","start","end","days","columns","Array","from","length","map","_","i","unit","weekStartsOn","Gantt","tasks","onTaskClick","editingTaskId","range","totalUnits","unitLabel","d","toPercent","date","dt","diff","className","children","col","style","width","fileName","_jsxFileName","lineNumber","columnNumber","t","idx","startClamped","endClamped","left","right","Math","max","isSelected","id","background","color","onClick","title","description","_c","$RefreshReg$"],"sources":["C:/work/EMG/app01/src/components/Gantt.jsx"],"sourcesContent":["import React from \"react\";\r\nimport {\r\n  parseISO,\r\n  startOfMonth,\r\n  endOfMonth,\r\n  startOfWeek,\r\n  endOfWeek,\r\n  startOfDay,\r\n  endOfDay,\r\n  differenceInDays,\r\n  differenceInHours,\r\n  addDays,\r\n  addHours,\r\n  format,\r\n} from \"date-fns\";\r\n\r\nfunction getRange(view, currentDate) {\r\n  if (view === \"month\") {\r\n    const start = startOfMonth(currentDate);\r\n    const end = endOfMonth(currentDate);\r\n    const days = differenceInDays(end, start) + 1;\r\n    const columns = Array.from({ length: days }).map((_, i) => addDays(start, i));\r\n    return { start, end, columns, unit: \"day\" };\r\n  }\r\n  if (view === \"week\") {\r\n    const start = startOfWeek(currentDate, { weekStartsOn: 1 });\r\n    const end = endOfWeek(currentDate, { weekStartsOn: 1 });\r\n    const days = differenceInDays(end, start) + 1;\r\n    const columns = Array.from({ length: days }).map((_, i) => addDays(start, i));\r\n    return { start, end, columns, unit: \"day\" };\r\n  }\r\n  // day view: use 24 hours\r\n  const start = startOfDay(currentDate);\r\n  const end = endOfDay(currentDate);\r\n  const columns = Array.from({ length: 24 }).map((_, i) => addHours(start, i));\r\n  return { start, end, columns, unit: \"hour\" };\r\n}\r\n\r\nexport default function Gantt({ tasks, view, currentDate, onTaskClick, editingTaskId }) {\r\n  const range = getRange(view, currentDate);\r\n  const totalUnits =\r\n    range.unit === \"day\"\r\n      ? differenceInDays(range.end, range.start) + 1\r\n      : differenceInHours(range.end, range.start) + 1;\r\n\r\n  const unitLabel = (d) =>\r\n    range.unit === \"day\" ? format(d, \"MM/dd (E)\") : format(d, \"HH:00\");\r\n\r\n  const toPercent = (date) => {\r\n    const dt = typeof date === \"string\" ? parseISO(date) : date;\r\n    const diff =\r\n      range.unit === \"day\" ? differenceInDays(dt, range.start) : differenceInHours(dt, range.start);\r\n    return (diff / totalUnits) * 100;\r\n  };\r\n\r\n  return (\r\n    <div className=\"gantt\">\r\n      <div className=\"timeline\">\r\n        {range.columns.map((col, i) => (\r\n          <div className=\"time-col\" key={i} style={{ width: `${100 / range.columns.length}%` }}>\r\n            <div className=\"time-label\">{unitLabel(col)}</div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"track-area\">\r\n        {tasks.map((t, idx) => {\r\n          const start = parseISO(t.start);\r\n          const end = parseISO(t.end);\r\n          // ensure values within range\r\n          const startClamped = start < range.start ? range.start : start;\r\n          const endClamped = end > range.end ? range.end : end;\r\n          const left = toPercent(startClamped);\r\n          const right = toPercent(endClamped);\r\n          const width = Math.max(0.5, right - left); // at least small width\r\n          const isSelected = editingTaskId && editingTaskId === t.id;\r\n          return (\r\n            <div className=\"track-row\" key={t.id}>\r\n              <div\r\n                className={`task${isSelected ? \" selected\" : \"\"}`}\r\n                style={{ left: `${left}%`, width: `${width}%`, background: t.color }}\r\n                onClick={() => onTaskClick && onTaskClick(t)}\r\n                title={`${t.title}\\n${t.description || \"\"}\\n${format(start, \"yyyy-MM-dd HH:mm\")} - ${format(end, \"yyyy-MM-dd HH:mm\")}`}\r\n              >\r\n                <div className=\"task-title\">{t.title}</div>\r\n                <div className=\"task-date\">{format(start, \"MM/dd\")} - {format(end, \"MM/dd\")}</div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}